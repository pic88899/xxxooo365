(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-364cf4bf"],{2708:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var a={methods:{goBack:function(){return window.history.length<=1?(this.$router.push({path:"/"}),!1):this.$router.go(-1)}}}},"34c0":function(e,t,s){"use strict";s.r(t);var a,i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"message"}},[s("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[s("van-tab",{attrs:{title:e.$t("m.mail.un_read")}},[s("van-pull-refresh",{on:{refresh:e.onRefreshSJ},model:{value:e.refreshing_sj,callback:function(t){e.refreshing_sj=t},expression:"refreshing_sj"}},[s("van-list",{attrs:{finished:e.finished_sj,"finished-text":e.$t("m.member.no_more")},on:{load:e.onLoadSJ},model:{value:e.loading_sj,callback:function(t){e.loading_sj=t},expression:"loading_sj"}},e._l(e.list_sj,(function(t,a){return 0==t.is_read?s("van-cell",{key:a,staticClass:"data-list",attrs:{center:"",label:t.created_at,"is-link":""},on:{click:function(s){return e.showDetailSJ(t)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s("【"+t.title+"】")+" ")]},proxy:!0},{key:"default",fn:function(){return[1==t.is_read?s("span",{staticClass:"add-money"},[e._v(e._s(e.$t("m.mail.read")))]):s("span",{staticClass:"sub-money"},[e._v(e._s(e.$t("m.mail.un_read")))])]},proxy:!0}],null,!0)}):e._e()})),1)],1),e.list_sj?e._e():s("p",{staticClass:"empty-none"},[e._v(" "+e._s(e.$t("m.mail.no_data"))+" ")])],1),s("van-tab",{attrs:{title:e.$t("m.mail.read")}},[s("van-pull-refresh",{on:{refresh:e.onRefreshSJ},model:{value:e.refreshing_sj,callback:function(t){e.refreshing_sj=t},expression:"refreshing_sj"}},[s("van-list",{attrs:{finished:e.finished_sj,"finished-text":e.$t("m.member.no_more")},on:{load:e.onLoadSJ},model:{value:e.loading_sj,callback:function(t){e.loading_sj=t},expression:"loading_sj"}},e._l(e.list_sj,(function(t,a){return 1==t.is_read?s("van-cell",{key:a,staticClass:"data-list",attrs:{center:"",label:t.created_at,"is-link":""},on:{click:function(s){return e.showDetailSJ(t)}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" "+e._s("【"+t.title+"】")+" ")]},proxy:!0},{key:"default",fn:function(){return[1==t.is_read?s("span",{staticClass:"add-money"},[e._v(e._s(e.$t("m.mail.read")))]):s("span",{staticClass:"sub-money"},[e._v(e._s(e.$t("m.mail.un_read")))])]},proxy:!0}],null,!0)}):e._e()})),1)],1),e.list_sj?e._e():s("p",{staticClass:"empty-none"},[e._v(" "+e._s(e.$t("m.mail.no_data"))+" ")])],1)],1),s("van-popup",{attrs:{closeable:"",round:"","close-icon":"close"},model:{value:e.isSJDetailShow,callback:function(t){e.isSJDetailShow=t},expression:"isSJDetailShow"}},[s("div",{staticClass:"my-dialog"},[s("div",{staticClass:"my-dialog__header"},[s("h4",{staticClass:"my-dialog__title"},[e._v(e._s(e.detailSJData.title))])]),s("div",{staticClass:"dialogContent"},[s("div",{domProps:{innerHTML:e._s(e.detailSJData.content)}})]),s("div",{staticClass:"msg-footer"},[s("button",{attrs:{type:"button"},on:{click:e.closeSJPage}},[e._v(" "+e._s(e.$t("m.mail.know")))])])])])],1)},n=[],r=(s("b0c0"),s("5530")),o=s("ade3"),c=(s("be7f"),s("565f")),l=(s("e7e5"),s("d399")),d=(s("e17f"),s("2241")),u=(s("2b28"),s("9ed2")),_=(s("0653"),s("34e9")),f=(s("8a58"),s("e41f")),m=(s("c194"),s("7744")),h=(s("2994"),s("2bdd")),g=(s("ab71"),s("58e6")),b=(s("bda7"),s("5e46")),p=(s("da3c"),s("0b33")),j=(s("5246"),s("6b41")),S=s("2708"),v=s("2f62"),J=s("2755"),y={name:"Message",props:[""],mixins:[S["a"]],data:function(){return{active:0,tablist:[{title:"收件箱",key:0},{title:"发件箱",key:1}],current_page_sj:0,refreshing_sj:!1,loading_sj:!1,finished_sj:!1,isSJDetailShow:!1,detailSJData:{},isReply:!1,replyForm:new J["t"],current_page_fj:0,refreshing_fj:!1,loading_fj:!1,finished_fj:!1,isFJDetailShow:!1,detailFJData:null}},components:(a={},Object(o["a"])(a,j["a"].name,j["a"]),Object(o["a"])(a,p["a"].name,p["a"]),Object(o["a"])(a,b["a"].name,b["a"]),Object(o["a"])(a,g["a"].name,g["a"]),Object(o["a"])(a,h["a"].name,h["a"]),Object(o["a"])(a,m["a"].name,m["a"]),Object(o["a"])(a,f["a"].name,f["a"]),Object(o["a"])(a,_["a"].name,_["a"]),Object(o["a"])(a,u["a"].name,u["a"]),Object(o["a"])(a,d["a"].Component.name,d["a"].Component),Object(o["a"])(a,l["a"].name,l["a"]),Object(o["a"])(a,c["a"].name,c["a"]),a),computed:Object(r["a"])({},Object(v["e"])({name:function(e){return e.member.name},unread:function(e){return e.member.unread_count},list_sj:function(e){return e.member.message_recevied},list_fj:function(e){return e.member.message_sent}})),beforeMount:function(){},mounted:function(){this.$emit("setTitle",this.$t("m.common.mail")),this.tablist=[{title:this.$t("m.mail.receive_box"),key:0},{title:this.$t("m.mail.send_box"),key:1}]},methods:Object(r["a"])({},Object(v["b"])({getSentMessageList:"member/getSentMessageList",getReceiveMessage:"member/getReceiveMessageList",readMessage:"member/readMessage",deleteReceiveMessage:"member/deleteMessage",replyMessageEvent:"member/replyMessage"}),{},Object(v["d"])({resetSJList:"member/RESET_MESSAGE_RECEIVED",resetFJList:"member/RESET_MESSAGE_SENT"}),{onRefreshSJ:function(){this.resetSJList(),this.current_page_sj=1,this.getReceivedList()},onLoadSJ:function(){this.current_page_sj++,this.getReceivedList()},getReceivedList:function(){var e=this,t={page:this.current_page_sj};this.getReceiveMessage(t).then((function(t){"success"==t.status&&(e.current_page_sj=t.data.current_page,t.data.total==e.list_sj.length?e.finished_sj=!0:e.finished_sj=!1),e.refreshing_sj=!1,e.loading_sj=!1}))},closeSJPage:function(){this.isSJDetailShow=!1},showDetailSJ:function(e){0==e.is_read&&this.readMessage({ids:e.id,state:!0}),this.detailSJData=e,this.isSJDetailShow=!0},setMessageUnread:function(){1==this.detailSJData.is_read&&this.readMessage({ids:this.detailSJData.id,state:!1}).then((function(e){"success"==e.status&&l["a"].success(e.message)}))},deleteSJMessage:function(){var e=this,t={ids:this.detailSJData.id};this.detailSJData.hasOwnProperty("is_read")||(t["message"]=!0),d["a"].confirm({title:"",message:"确定删除吗？",beforeClose:function(s,a){"confirm"==s?e.deleteReceiveMessage(t).then((function(t){a(),l["a"].success(e.$t("m.mail.delete_success")),e.closeSJPage()})):a()}}).catch((function(){}))},replyMessageShow:function(){this.isReply=!0},replyMessage:function(e,t){var s=this;"confirm"==e?(this.detailSJData&&(this.replyForm.pid=this.detailSJData.id),this.replyMessageEvent(this.replyForm).then((function(e){"success"==e.status?(t(),l["a"].success(e.message),s.replyForm=new J["t"]):t(!1)})).catch((function(e){t(!1)}))):t()},getSentList:function(){var e=this,t={page:this.current_page_fj};this.getSentMessageList(t).then((function(t){"success"==t.status&&(e.current_page_fj=t.data.current_page,t.data.total==e.list_fj.length?e.finished_fj=!0:e.finished_fj=!1),e.refreshing_fj=!1,e.loading_fj=!1}))},onRefreshFJ:function(){this.resetFJList(),this.current_page_fj=1,this.getSentList()},onLoadFJ:function(){this.current_page_fj++,this.getSentList()}}),watch:{isSJDetailShow:function(e){0==e&&(this.detailSJData={})}}},k=y,w=(s("4cbd"),s("2877")),M=Object(w["a"])(k,i,n,!1,null,"b437374a",null);t["default"]=M.exports},"371f":function(e,t,s){},"4cbd":function(e,t,s){"use strict";var a=s("371f"),i=s.n(a);i.a}}]);